<p-toast></p-toast>
<div class="admin-page">
  <p-card>
    <div class="row">
      <div class="col-12">
        <div class="btn-group">
          <button
            pButton
            (click)="onSubmit()"
            class="mr-2 p-button-success"
            aria-current="page"
            icon="pi pi-check"
            [label]="editMode ? 'Update' : 'Create'"
          ></button>
          <button
            class="p-button-danger"
            pButton
            icon="pi pi-angle-double-left"
            routerLink="/products"
            aria-current="page"
            label="Cancel"
          ></button>
        </div>
      </div>
    </div>

    <form [formGroup]="form">
      <div class="row">
        <div class="p-fluid col-4">
          <div class="p-field">
            <label for="name">Name</label>
            <input formControlName="name" id="name" type="text" pInputText />
            <small
              *ngIf="productForm.name.invalid && isSubmitted"
              class="p-error"
              >Name is required</small
            >
          </div>
        </div>
        <div class="p-fluid col-4">
          <div class="p-field">
            <label for="brand">Brand</label>
            <input formControlName="brand" id="brand" type="text" pInputText />
            <small
              *ngIf="productForm.brand.invalid && isSubmitted"
              class="p-error"
              >Brand is required</small
            >
          </div>
        </div>
        <div class="p-fluid col-4">
          <div class="p-field">
            <label for="price">Price</label><br />
            <p-inputNumber
              formControlName="price"
              mode="decimal"
              [useGrouping]="false"
            >
            </p-inputNumber>
            <small
              *ngIf="productForm.price.invalid && isSubmitted"
              class="p-error"
              >Price is required</small
            >
          </div>
        </div>
      </div>

      <div class="row">
        <div class="p-fluid col-4">
          <div class="p-field">
            <label for="countInStock">CountInStock</label><br />
            <p-inputNumber
              formControlName="countInStock"
              mode="decimal"
              [useGrouping]="false"
            >
            </p-inputNumber>
            <small
              *ngIf="productForm.countInStock.invalid && isSubmitted"
              class="p-error"
              >Count in stock is required</small
            >
          </div>
        </div>
        <div class="p-field col-4">
          <div class="p-field">
            <label for="category">Category</label><br />
            <p-dropdown
              [options]="catagories"
              formControlName="category"
              optionLabel="name"
              optionValue="_id"
              [filter]="true"
              filterBy="name"
              [showClear]="true"
              placeholder="Select a Category"
            ></p-dropdown>

            <small
              *ngIf="productForm.category.invalid && isSubmitted"
              class="p-error"
              >Category is required</small
            >
          </div>
        </div>
        <div class="p-fluid col-4">
          <div class="p-field">
            <label for="isFeatured">Is Featured</label><br />
            <p-inputSwitch formControlName="isFeatured"></p-inputSwitch>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="p-fluid col-12">
          <div class="p-field">
            <label for="description">Description</label><br />
            <textarea
              pInputTextarea
              formControlName="description"
              [rows]="7"
              [cols]="30"
            ></textarea>
            <small
              *ngIf="productForm.description.invalid && isSubmitted"
              class="p-error"
              >Description is required</small
            >
          </div>
        </div>
      </div>
      <div class="row">
        <div class="p-field col-12">
          <label for="richDescription">Product Details</label><br />
          <p-editor
            formControlName="richDescription"
            [style]="{ height: '320px' }"
          ></p-editor>
        </div>
      </div>
      <!-- <div class="p-field p-col-12">
        <label for="name">Main Image</label>
        <input
          type="file"
          class="p-inputtext"
          accept="image/*"
          (change)="onImageUpload($event)"
        />
        <small *ngIf="productForm.image.invalid && isSubmitted" class="p-error"
          >Image is required</small
        >
        <div class="p-col-2 p-mt-2 p-pl-0">
          <img style="width: 100%" [src]="imageDisplay" alt="" />
        </div>
      </div> -->
    </form>
  </p-card>
</div>
